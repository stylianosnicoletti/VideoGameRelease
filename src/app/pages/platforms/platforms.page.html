  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>{{ platformDetails.Title }} Games</ion-title>
      <div slot="end" class="iIcon" id="iIcon">
        <img slot="end" src="assets/social-media/instagram.svg" (click)="goToInstagramLink()">
      </div>
      <ion-label slot="end">&nbsp;&nbsp;&nbsp;</ion-label>
    </ion-toolbar>
  </ion-header>


  <div *ngIf="listOfGames.length == 0; then showLoading else showListOfGames">
    <!-- Normal screen -->

    <!-- Skeleton in here-->
  </div>

  <!-- Skeleton: List filtered items -->
  <ng-template #showListOfGames>

    <ion-content>


      <ion-refresher slot="fixed" (ionRefresh)="doRefresh()">
        <ion-refresher-content>
        </ion-refresher-content>
      </ion-refresher>
      <!--Ionic Framework requires that features such as collapsible large titles,
      ion-infinite-scroll, ion-refresher, and ion-reorder-group be used within an ion-content.
      To use these experiences with virtual scrolling, you must add the .ion-content-scroll-host class to the virtual scroll viewport.-->
      <cdk-virtual-scroll-viewport class="ion-content-scroll-host" itemSize="210" minBufferPx="3780" maxBufferPx="5250"
        (scrolledIndexChange)="getNextBatch($event)">
        <ion-list>
          <ion-card *cdkVirtualFor="let x of listOfGames; let i = index; trackBy: trackByIdx"
            (click)="gameClicked(x.game.id, x.game.url)">
            <ion-item button>
              <ion-avatar slot="start">
                <ion-img *ngIf="x.game?.cover?.url != null"
                  src='{{ x.game.cover.url.replace("t_thumb", "t_cover_big") }}'>
                </ion-img>
                <ion-img *ngIf="x.game?.cover?.url == null" src='assets/icons/icon-192x192.png'>
                </ion-img>
              </ion-avatar>
              <ion-card-header>
                <ion-card-subtitle>{{x.human}}</ion-card-subtitle>
                <ion-card-title>{{x.game.name}}</ion-card-title>
                <p></p>
                <div text-wrap *ngFor="let genre of x.game.genres?.slice(0, 1);">
                  <ion-badge>{{ genre.name }}</ion-badge>
                  <ion-badge *ngIf="x.game.genres.length > 1">..</ion-badge>
                </div>
                <p></p>
                <div class="horizontal" *ngIf="platformDetails.Title == 'All'">
                  <div class="horizontal" *ngFor="let customSlug of x.customMultiPlatformFoundSlugs">
                    <img src='assets/platform-icons/{{ customSlug }}.svg' class="platform_theme">
                  </div>
                </div>
                <img *ngIf="platformDetails.Title != 'All'" src='assets/platform-icons/{{ x.platform.slug }}.svg'
                  class="platform_theme">
                <p></p>
                <ion-text *ngIf=" x.game.summary?.length > 0">{{ x.game.summary }}</ion-text>
              </ion-card-header>
            </ion-item>
          </ion-card>
        </ion-list>
      </cdk-virtual-scroll-viewport>
    </ion-content>

  </ng-template>

  <!-- Skeleton Loading screen -->
  <ng-template #showLoading>
    <ion-content>

      <ion-card *ngFor="let number of [0,1,2,3,4,6,7]">
        <ion-item>
          <ion-avatar slot="start">
            <ion-skeleton-text animated style="width: 100%; height: 100%"></ion-skeleton-text>
          </ion-avatar>
          <ion-card-header>
            <ion-card-subtitle>
              <ion-skeleton-text animated style="width: 92px; height: 16px">
              </ion-skeleton-text>
            </ion-card-subtitle>
            <ion-card-title>
              <ion-skeleton-text animated style="width: 180px; height: 20px">
              </ion-skeleton-text>
            </ion-card-title>
            <p></p>
            <ion-skeleton-text animated style="width: 50px; height: 20px">
            </ion-skeleton-text>
            <p></p>
            <ion-skeleton-text animated style="width: 22px; height: 22px">
            </ion-skeleton-text>
          </ion-card-header>
        </ion-item>
      </ion-card>


    </ion-content>
  </ng-template>